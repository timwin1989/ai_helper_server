# topic_utils.py

def infer_topic(text):
    lowered = text.lower()
    TOPIC_KEYWORDS = {
        "Безопасность": ["безопасн", "охран", "турникет", "камера"],
        "Дорожное строительство": ["дорог", "битум", "асфальт", "реконструкц", "капремонт", "грейдер", "трасс"],
        "Коммунальные тарифы": ["вода", "тариф", "отоплен", "газ", "электроэнерг", "жкх", "услуги"],
        "Наука и инновации": ["научн", "разработк", "инновац", "исследован", "институт", "внедрени"],
        "Здравоохранение": ["медицин", "здоров", "врач", "поликлин", "больниц", "пациент", "лекарств"],
        "Экология": ["эколог", "загрязнен", "отход", "свалк", "природ", "воздух", "водоём", "климат"],
        "Экономика и бюджет": ["бюджет", "финанс", "экономик", "налог", "субсид", "инвестиц", "расход", "доход"],
        "Образование": ["образован", "школ", "детсад", "учебн", "студент", "университет", "колледж", "школьн", "учебник", "ученик", "учащ"],
        "Социальная защита": ["пособ", "пенси", "социальн", "малоимущ", "инвалид", "многодетн", "льгот", "поддержк"],
        "Транспорт": ["транспорт", "маршрут", "автобус", "перевозк", "пассажир", "вокзал", "железн", "автопарк"],
        "Сельское хозяйство": ["фермер", "аграр", "сельхоз", "животновод", "урожай", "пшениц", "зерно", "севооборот"],
        "IT и цифровизация": ["цифров", "госуслуг", "информ", "айти", "ИТ", "IT", "технопарк", "цифровизация", "платформа", "сайт"],
        "Правопорядок и МВД": ["мвд", "полиция", "преступ", "прокурор", "уголовн", "суд", "участков", "гбр"],
        "Труд и занятость": ["труд", "работ", "занятост", "безработ", "ваканси", "центр занятости", "трудоустройств"],
        "Культура и спорт": ["культур", "спорт", "досуг", "библиотек", "музе", "артист", "спорткомплекс"],
        "Миграция и гражданство": ["гражданств", "миграц", "вид на жительств", "паспорт", "регистрация", "переселен"],
        "Жилищные вопросы": ["жиль", "ипотек", "квартир", "долёв", "дом", "строительств", "новостро", "заселен"],
        "Молодёжная политика": ["молодеж", "волонт", "грант", "стипенд", "инициатив", "молодежн"],
        "Инфраструктура и связь": ["связь", "интернет", "мобильн", "антенн", "сигнал", "инфраструктур", "дорога", "канализац"],
        "Предпринимательство": ["бизнес", "предпринимател", "кредит", "льготн", "финансирован", "мсп", "стартап"],
        "Коррупция и этика": ["коррупц", "прозрачн", "откат", "незаконн", "антикоррупц", "декларац"]
    }
    for topic, keywords in TOPIC_KEYWORDS.items():
        if any(word in lowered for word in keywords):
            return topic
    return "Общее"
